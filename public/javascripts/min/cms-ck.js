function getImages(){var o=$(location).attr("pathname");o.indexOf(1);var e=o.split("/")[3];id=o.split("/")[4],console.log("baseURL:"+baseURL);var t=baseURL+"/cms/"+e+"/"+id+"/imgs";console.log("URL:"+t),jQuery.get(t,function(o){console.log("data?:"+o),$(".images").html(o)})}function formatFileSize(o){return"number"!=typeof o?"":o>=1e9?(o/1e9).toFixed(2)+" GB":o>=1e6?(o/1e6).toFixed(2)+" MB":(o/1e3).toFixed(2)+" KB"}function dropDown(){$(".dropdown span").click(function(){var o=$(this).width;$(".dropdown ul").toggleClass("visible"),$(".dropdown a").css("width",o)})}function accordion(){var o=$(window).height()-66;$("#accordion").height(o),$("#accordion").accordion({heightStyle:"fill"})}function typFold(){$(".lst").hide(),$(".lst:first").slideDown(),$("h1").click(function(){$(this).next(".lst").slideToggle()})}function resizeTextArea(o){o.height(o[0].scrollHeight)}function wysihtml5(){var o=new wysihtml5.Editor("textarea",{toolbar:"toolbar",parserRules:wysihtml5ParserRules});o.on("load",function(){log.innerHTML+="<div>load</div>"}).on("focus",function(){log.innerHTML+="<div>focus</div>"}).on("blur",function(){log.innerHTML+="<div>blur</div>"}).on("change",function(){log.innerHTML+="<div>change</div>"}).on("paste",function(){log.innerHTML+="<div>paste</div>"}).on("newword:composer",function(){log.innerHTML+="<div>newword:composer</div>"}).on("undo:composer",function(){log.innerHTML+="<div>undo:composer</div>"}).on("redo:composer",function(){log.innerHTML+="<div>redo:composer</div>"})}function sortImages(){$(".images").sortable({handle:".handle",update:function(){var o=$(".images").sortable("toArray").toString();console.log("order:"+o);var e=$(location).attr("pathname");e.indexOf(1),utt=e.split("/")[3],console.log("utt:"+utt),$("#info").load(baseURL+"/cms/"+utt+"/img/sort/"+o)}})}$(document).ready(function(){sortImages(),accordion(),$(window).resize(function(){accordion(),$("#accordion").accordion("refresh")}),dropDown()}),getImages();var images=$("tbody.images");$("#drop a").click(function(){console.log("click"),$(this).parent().find("input").click()}),$("#upload").fileupload({dropZone:$("#drop"),add:function(o,e){o.preventDefault();var t=$('<tr class="working"><td class="msg"></td><td><input type="text" value="0" data-width="48" data-height="48" data-fgColor="#0788a5" data-readOnly="1" data-bgColor="#3e4043" /></td><td class="name"></td><td class="size"></td></tr>');t.find("td.size").text(formatFileSize(e.files[0].size)),t.find("td.name").text(e.files[0].name),e.context=t.appendTo(images),t.find("span").click(function(){t.hasClass("working")&&n.abort(),t.fadeOut(function(){t.remove()})});var n=e.submit().success(function(o,n,i){if("image/png"!=e.files[0].type&&"image/jpg"!=e.files[0].type&&"image/jpeg"!=e.files[0].type&&"application/pdf"!=e.files[0].type&&"application/msword"!=e.files[0].type&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!=e.files[0].type&&"application/zip"!=e.files[0].type)return t.find("td.msg").text("Alleen .png, .jpg, .jpeg, .pdf, .doc, en .zip zijn toegestaan."),e.context.addClass("error"),void e.context.delay(2e3).fadeOut("slow");var a=JSON.parse(o),d=a.status;return"error"==d?(t.find("td.msg").text("Fout"),e.context.addClass("error"),void e.context.delay(2e3).fadeOut("slow")):(getImages(),void setTimeout(function(){},3e3))})},progress:function(o,e){var t=parseInt(e.loaded/e.total*100,10);e.context.find("input").val(t).change(),100==t&&e.context.removeClass("working")},fail:function(o,e){e.context.addClass("error"),e.context.delay(2e3).fadeOut("slow")}}),$(document).on("drop dragover",function(o){o.preventDefault()}),$(window).resize(function(){sort()});